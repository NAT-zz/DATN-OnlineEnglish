"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[8867],{55346:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(19860),i=t(1413),o=(0,t(17592).ZP)("span")((function(e){var n=e.theme,t=e.ownerState,r=t.status,o=t.size;return(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({width:10,height:10,display:"flex",borderRadius:"50%",alignItems:"center",justifyContent:"center","&:before, &:after":{content:"''",borderRadius:1,backgroundColor:n.palette.common.white}},"small"===o&&{width:8,height:8}),"large"===o&&{width:12,height:12}),"offline"===r&&{backgroundColor:"transparent"}),"away"===r&&{backgroundColor:n.palette.warning.main,"&:before":{width:2,height:4,transform:"translateX(1px) translateY(-1px)"},"&:after":{width:2,height:4,transform:"translateY(1px) rotate(125deg)"}}),"busy"===r&&{backgroundColor:n.palette.error.main,"&:before":{width:6,height:2}}),"online"===r&&{backgroundColor:n.palette.success.main}),"invisible"===r&&{backgroundColor:n.palette.text.disabled,"&:before":{width:6,height:6,borderRadius:"50%"}}),"unread"===r&&{backgroundColor:n.palette.info.main})})),s=t(46417);function a(e){var n=e.size,t=void 0===n?"medium":n,i=e.status,a=void 0===i?"offline":i,c=e.sx,d=(0,r.Z)();return(0,s.jsx)(o,{ownerState:{status:a,size:t},sx:c,theme:d})}},37903:function(e,n,t){t.d(n,{Z:function(){return f}});var r=t(1413),i=t(45987),o=t(9506),s=t(35898),a=t(61113),c=t(3404),d=t(90891),l=t(2135),u=t(46417);function x(e){var n=e.link,t=e.activeLast,i=e.disabled,s=n.name,a=n.href,c=n.icon,x=(0,r.Z)({typography:"body2",alignItems:"center",color:"text.primary",display:"inline-flex"},i&&!t&&{cursor:"default",pointerEvents:"none",color:"text.disabled"}),h=(0,u.jsxs)(u.Fragment,{children:[c&&(0,u.jsx)(o.Z,{component:"span",sx:{mr:1,display:"inherit","& svg":{width:20,height:20}},children:c}),s]});return a?(0,u.jsx)(d.Z,{component:l.rU,to:a,sx:x,children:h}):(0,u.jsxs)(o.Z,{sx:x,children:[" ",h," "]})}var h=["links","action","heading","moreLink","activeLast","sx"];function f(e){var n=e.links,t=e.action,l=e.heading,f=e.moreLink,p=e.activeLast,g=e.sx,Z=(0,i.Z)(e,h),v=n[n.length-1].name;return(0,u.jsxs)(o.Z,{sx:(0,r.Z)({mb:5},g),children:[(0,u.jsxs)(s.Z,{direction:"row",alignItems:"center",children:[(0,u.jsxs)(o.Z,{sx:{flexGrow:1},children:[l&&(0,u.jsx)(a.Z,{variant:"h4",gutterBottom:!0,children:l}),!!n.length&&(0,u.jsx)(c.Z,(0,r.Z)((0,r.Z)({separator:(0,u.jsx)(m,{})},Z),{},{children:n.map((function(e){return(0,u.jsx)(x,{link:e,activeLast:p,disabled:e.name===v},e.name||"")}))}))]}),t&&(0,u.jsxs)(o.Z,{sx:{flexShrink:0},children:[" ",t," "]})]}),!!f&&(0,u.jsx)(o.Z,{sx:{mt:2},children:f.map((function(e){return(0,u.jsx)(d.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)}))})]})}function m(){return(0,u.jsx)(o.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}})}},89902:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(1413),i=t(45987),o=t(70501),s=t(61113),a=t(46417),c=["query","sx"];function d(e){var n=e.query,t=e.sx,d=(0,i.Z)(e,c);return n?(0,a.jsxs)(o.Z,(0,r.Z)((0,r.Z)({sx:(0,r.Z)({textAlign:"center"},t)},d),{},{children:[(0,a.jsx)(s.Z,{variant:"h6",paragraph:!0,children:"Not found"}),(0,a.jsxs)(s.Z,{variant:"body2",children:["No results found for \xa0",(0,a.jsxs)("strong",{children:['"',n,'"']}),".",(0,a.jsx)("br",{})," Try checking for typos or using complete words."]})]})):(0,a.jsx)(s.Z,{variant:"body2",sx:t,children:"Please enter keywords"})}},68867:function(e,n,t){t.d(n,{en:function(){return $},L3:function(){return ne},iJ:function(){return Y}});var r=t(74165),i=t(15861),o=t(29439),s=t(47313),a=t(47825),c=t(73428),d=t(35898),l=t(24193),u=t(63585),x=t(61113),h=t(68492),f=t(16031),m=t(37964),p=t(64438),g=t(41365),Z=t(65630),v=t(30404),j=t(76025),b=t(59519),y=t(37903),w=t(1413),k=t(45987),C=t(54882),I=t(41727),N=t(47131),E=t(90419),S=t(16335),A=t(46417),T=["disabled","conversationId","onSend","sx"],R="8864c717-587d-472a-929a-8e5f298024da-0";function _(e){e.disabled,e.conversationId;var n=e.onSend,t=e.sx,r=(0,k.Z)(e,T),i=(0,s.useState)(""),a=(0,o.Z)(i,2),c=a[0],l=a[1];return(0,A.jsx)(C.ZP,(0,w.Z)({value:c,onKeyUp:function(e){"Enter"===e.key&&(n&&c&&n({messageId:(0,E.Z)(),message:c,contentType:"text",attachments:[],createdAt:new Date,senderId:R}),l(""))},onChange:function(e){return l(e.target.value)},placeholder:"Type a message",startAdornment:(0,A.jsx)(I.Z,{position:"start",children:(0,A.jsx)(N.Z,{size:"small",children:(0,A.jsx)(S.Z,{icon:"eva:smiling-face-fill"})})}),endAdornment:(0,A.jsx)(d.Z,{direction:"row",spacing:1,sx:{flexShrink:0,mr:1.5},children:(0,A.jsx)(N.Z,{onClick:function(){n&&c&&(n({messageId:(0,E.Z)(),message:c,contentType:"text",attachments:[],createdAt:new Date,senderId:R}),l(""))},children:(0,A.jsx)(S.Z,{icon:"formkit:caretright"})})}),sx:(0,w.Z)({pl:1,height:56,flexShrink:0,borderTop:function(e){return"solid 1px ".concat(e.palette.divider)}},t)},r))}var O=t(59743),P=t(18233);function W(e){var n=e.message,t=e.createdAt,r=e.senderId,i=e.currentId,o=e.senderName,s=r===i?{type:"me"}:{name:o},a="me"===s.type,c=s.name&&s.name.split(" ")[0];return(0,A.jsxs)(d.Z,{direction:"row",justifyContent:a?"flex-end":"flex-start",sx:{mb:3},children:[!a&&(0,A.jsx)(u.Z,{alt:s.name,src:s.name,sx:{width:32,height:32,mr:2}}),(0,A.jsxs)(d.Z,{spacing:1,alignItems:a?"flex-end":"flex-start",children:[(0,A.jsxs)(x.Z,{noWrap:!0,variant:"caption",sx:(0,w.Z)({color:"text.disabled"},!a&&{mr:"auto"}),children:[!a&&"".concat(c,",")," \xa0",(0,P.Z)(new Date(t),{addSuffix:!0})]}),(0,A.jsx)(d.Z,{sx:(0,w.Z)({p:1.5,minWidth:48,maxWidth:320,borderRadius:1,overflow:"hidden",typography:"body2",bgcolor:"background.neutral"},a&&{color:"grey.800",bgcolor:"primary.lighter"}),children:n})]})]})}function L(e){var n=e.conversation,t=e.currentId,r=e.senderName,i=(0,s.useRef)(null);return(0,s.useEffect)((function(){i.current&&(i.current.scrollTop=i.current.scrollHeight)}),[n]),(0,A.jsx)(O.Z,{scrollableNodeProps:{ref:i},sx:{p:3,height:1},children:n.map((function(e){return(0,A.jsx)(W,{message:e.message,createdAt:e.createdAt,senderId:e.senderId,currentId:t,senderName:r},e.createdAt)}))})}var q=t(83870),G=t.n(q),M=t(46642),z=t.n(M),D=t(17551),B=t(19065),K=t(24631),U=t(9506),F=t(66212),H=t(89902),J=["contacts","recipients","onAddRecipients","sx"];function Y(e){var n=e.contacts,t=e.recipients,r=e.onAddRecipients,i=e.sx,a=(0,k.Z)(e,J),c=(0,s.useState)(""),l=(0,o.Z)(c,2),h=l[0],f=l[1];return(0,A.jsxs)(d.Z,(0,w.Z)((0,w.Z)({spacing:1,direction:"row",alignItems:"center",sx:(0,w.Z)({py:2,px:2.5},i)},a),{},{children:[(0,A.jsx)(x.Z,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Select Class:"}),(0,A.jsx)(B.Z,{sx:{minWidth:240},popupIcon:null,noOptionsText:(0,A.jsx)(H.Z,{query:h}),onChange:function(e,n){return t=n,f(""),void r(t);var t},onInputChange:function(e,n){return f(n)},options:n,getOptionLabel:function(e){return e.name},renderInput:function(e){return(0,A.jsx)(K.Z,(0,w.Z)((0,w.Z)({},e),{},{size:"small",placeholder:t.length?"+Class":""}))},renderOption:function(e,n,t){var r=t.inputValue,i=t.selected,o=n.name,s=z()(o,r),a=G()(o,s);return(0,A.jsxs)(U.Z,(0,w.Z)((0,w.Z)({component:"li",sx:{p:"12px !important"}},e),{},{children:[(0,A.jsxs)(U.Z,{sx:{mr:1.5,width:32,height:32,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[(0,A.jsx)(u.Z,{alt:o,src:o}),(0,A.jsx)(U.Z,{sx:(0,w.Z)({top:0,opacity:0,width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",bgcolor:function(e){return(0,D.Fq)(e.palette.grey[900],.8)},transition:function(e){return e.transitions.create("opacity",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.shorter})}},i&&{opacity:1,color:"primary.main"}),children:(0,A.jsx)(S.Z,{icon:"eva:checkmark-fill"})})]}),a.map((function(e,n){return(0,A.jsx)(x.Z,{variant:"subtitle2",color:e.highlight?"primary":"textPrimary",children:e.text},n)}))]}))},renderTags:function(e,n){return e.map((function(e,t){return(0,s.createElement)(F.Z,(0,w.Z)((0,w.Z)({},n({index:t})),{},{key:e.id,size:"small",label:e.name,avatar:(0,A.jsx)(u.Z,{alt:e.name,src:e.name})}))}))}})]}))}function $(){var e=(0,b.K$)().themeStretch,n=(0,m.E)().user,t=(0,s.useState)([]),w=(0,o.Z)(t,2),k=w[0],C=w[1],I=(0,s.useState)({}),N=(0,o.Z)(I,2),E=N[0],S=N[1],T=(0,s.useState)([]),R=(0,o.Z)(T,2),O=R[0],P=R[1],W=(0,s.useState)([]),q=(0,o.Z)(W,2),G=q[0],M=q[1],z=(0,s.useCallback)((function(e){var t=(0,p.ZP)(e,{query:{userId:null===n||void 0===n?void 0:n.id}});t.on("newMessage",(function(e){if(console.log(e),""!==e){var n=[{createdAt:e.createdAt,message:e.message,senderId:e.id}];P((function(e){return e.concat(n)}))}})),t.on("connect_error",(function(e){console.log("CONNECT_ERROR",e)})),t.on("reconnect_attempt",(function(e){console.log("RECONNECT_ATTEMPT",e)})),t.on("reconnect_failed",(function(){console.log("RECONNECT_FAILED")})),t.on("reconnect_error",(function(e){console.log("RECONNECT_ERROR",e)})),t.on("connection",(function(){console.log("connection",t.id)})),t.on("connect",(function(){console.log("connect",t.id)})),t.on("error",(function(e){console.log("error",e)})),t.on("disconnect",(function(e){console.log("disconnect",e)}))}),[null===n||void 0===n?void 0:n.id]);(0,s.useEffect)((function(){E&&z(v.qL)}),[E,z]),(0,s.useEffect)((function(){(0,h.Pq)().then((function(e){M(e.data)}))}),[null===n||void 0===n?void 0:n.role]),(0,s.useEffect)((function(){E.id&&(0,h.rA)(null===E||void 0===E?void 0:E.id).then((function(e){(0,f.isArray)(e.data)&&P(e.data)}))}),[E]);var D=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,h.bG)(E.id,{message:t.message});case 3:i=[{createdAt:t.createdAt,message:t.message,senderId:null===n||void 0===n?void 0:n.id}],P((function(e){return e.concat(i)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),B=function(){S({}),P([])},K=function(e){return function(){S(e)}};return(0,A.jsxs)(a.Z,{maxWidth:!e&&"xl",children:[(0,A.jsx)(y.Z,{heading:"Chat",links:[{name:"Dashboard",href:j.vB.root},{name:"Chat"}]}),(0,A.jsx)(c.Z,{sx:{height:"72vh",display:"flex"},children:(0,A.jsxs)(d.Z,{flexGrow:1,sx:{overflow:"hidden"},children:[(0,A.jsxs)(d.Z,{direction:"row",alignItems:"center",children:[(0,A.jsx)(Y,{recipients:G,contacts:G,onAddRecipients:function(e){if(e){if("TEACHER"===(null===n||void 0===n?void 0:n.role))(0,h.fB)(e.id).then((function(e){C(e.data)}));else if("STUDENT"===(null===n||void 0===n?void 0:n.role)){var t,r=null===(t=G.find((function(n){return(null===n||void 0===n?void 0:n.id)===e.id})))||void 0===t?void 0:t.teacher;r&&C([r])}}else C([]),P([]),S({})}}),k.length>0&&k.map((function(e,n){return(0,A.jsx)(l.Z,{variant:e.id===E.id?"contained":"outlined",disabled:!(!E.id||e.id===E.id),endIcon:e.id===E.id?(0,A.jsx)(g.Tw,{onClick:B}):(0,A.jsx)(g.Ne,{onClick:K(e)}),children:(0,A.jsxs)(d.Z,{direction:"row",alignItems:"center",justifyContent:"center",children:[(0,A.jsx)(u.Z,{src:Z.ZP.image.avatar(n),sx:{width:32,height:32}}),(0,A.jsx)(x.Z,{sx:{ml:1},children:null===e||void 0===e?void 0:e.userName})]})})}))]}),(0,A.jsx)(d.Z,{direction:"row",flexGrow:1,sx:{overflow:"hidden",borderTop:function(e){return"solid 1px ".concat(e.palette.divider)}},children:(0,A.jsxs)(d.Z,{flexGrow:1,sx:{minWidth:0},children:[(0,A.jsx)(L,{conversation:O,currentId:null===n||void 0===n?void 0:n.id,senderName:E.userName}),(0,A.jsx)(_,{conversationId:null===E||void 0===E?void 0:E.id,onSend:D,disabled:!(null===E||void 0===E||!E.id)})]})})]})})]})}var V=["disabled","conversationId","onSend","sx"];function X(e){e.disabled,e.conversationId;var n=e.onSend,t=e.sx,r=(0,k.Z)(e,V),i=(0,s.useState)(""),a=(0,o.Z)(i,2),c=a[0],l=a[1];return(0,A.jsx)(C.ZP,(0,w.Z)({value:c,onKeyUp:function(e){"Enter"===e.key&&(n&&c&&n({message:c,senderName:"me"}),l(""))},onChange:function(e){return l(e.target.value)},placeholder:"Type a message",startAdornment:(0,A.jsx)(I.Z,{position:"start",children:(0,A.jsx)(N.Z,{size:"small",children:(0,A.jsx)(S.Z,{icon:"eva:smiling-face-fill"})})}),endAdornment:(0,A.jsx)(d.Z,{direction:"row",spacing:1,sx:{flexShrink:0,mr:1.5},children:(0,A.jsx)(N.Z,{onClick:function(){n&&c&&(n({message:c,senderName:"me"}),l(""))},children:(0,A.jsx)(S.Z,{icon:"formkit:caretright"})})}),sx:(0,w.Z)({pl:1,height:56,flexShrink:0,borderTop:function(e){return"solid 1px ".concat(e.palette.divider)}},t)},r))}function Q(e){var n=e.message,t=e.senderName,r="Me"===t;return(0,A.jsxs)(d.Z,{direction:"row",justifyContent:r?"flex-end":"flex-start",sx:{mb:3},children:[!r&&(0,A.jsx)(u.Z,{alt:t,src:t,sx:{width:32,height:32,mr:2}}),(0,A.jsxs)(d.Z,{spacing:1,alignItems:r?"flex-end":"flex-start",children:[(0,A.jsxs)(x.Z,{noWrap:!0,variant:"caption",sx:(0,w.Z)({color:"text.disabled"},!r&&{mr:"auto"}),children:["".concat(""===t?"E-Bot":t)," \xa0"]}),(0,A.jsx)(d.Z,{sx:(0,w.Z)({p:1.5,minWidth:48,maxWidth:320,borderRadius:1,overflow:"hidden",typography:"body2",bgcolor:"background.neutral"},r&&{color:"grey.800",bgcolor:"primary.lighter"}),children:n.split("\n").map((function(e,n){return(0,A.jsxs)("span",{children:[e,(0,A.jsx)("br",{})]},n)}))})]})]})}function ee(e){var n=e.conversation,t=(0,s.useRef)(null);return(0,s.useEffect)((function(){t.current&&(t.current.scrollTop=t.current.scrollHeight)}),[n]),(0,A.jsx)(O.Z,{scrollableNodeProps:{ref:t},sx:{p:3,height:1},children:n.map((function(e){return(0,A.jsx)(Q,{message:e.message,senderName:e.senderName})}))})}function ne(){var e=(0,b.K$)().themeStretch,n=(0,m.E)().user,t=(0,s.useState)([]),l=(0,o.Z)(t,2),u=l[0],x=l[1],f=(0,s.useCallback)((function(e){var t=(0,p.ZP)(e,{query:{userId:null===n||void 0===n?void 0:n.id}});t.on("startOneMessage",(function(e){var n=[{message:"",senderName:""}];x((function(e){return e.concat(n)}))})),t.on("newMessage",(function(e){x((function(n){return n.map((function(n){return""===n.senderName&&(n.message+=e),n}))}))})),t.on("endOneMessage",(function(){x((function(e){return e.map((function(e){return""===e.senderName&&(e.senderName="E-Bot"),e}))}))})),t.on("disconnect",(function(e){console.log("disconnect",e)}))}),[null===n||void 0===n?void 0:n.id]);(0,s.useEffect)((function(){f(v.qL)}),[f]);var g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[{message:n.message,senderName:"Me"}],x((function(e){return e.concat(t)})),e.next=5,(0,h.Jv)({content:n.message});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,A.jsxs)(a.Z,{maxWidth:!e&&"xl",children:[(0,A.jsx)(y.Z,{heading:"Chat",links:[{name:"Dashboard",href:j.vB.root},{name:"Chat with AI"}]}),(0,A.jsx)(c.Z,{sx:{height:"72vh",display:"flex"},children:(0,A.jsx)(d.Z,{flexGrow:1,sx:{overflow:"hidden"},children:(0,A.jsx)(d.Z,{direction:"row",flexGrow:1,sx:{overflow:"hidden",borderTop:function(e){return"solid 1px ".concat(e.palette.divider)}},children:(0,A.jsxs)(d.Z,{flexGrow:1,sx:{minWidth:0},children:[(0,A.jsx)(ee,{conversation:u}),(0,A.jsx)(X,{conversationId:0,onSend:g,disabled:!1})]})})})})]})}t(55346),t(45)},90419:function(e,n,t){function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)}))}t.d(n,{Z:function(){return r}})}}]);