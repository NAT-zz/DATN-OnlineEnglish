"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[3567],{68378:function(e,n,t){t.d(n,{Z:function(){return x}});var o=t(1413),r=t(45987),i=t(47313),a=t(19860),l=t(9506),d=t(17592),s=t(17551),c=(0,d.ZP)(l.Z)((function(e){var n=e.theme,t=e.ownerState,r="light"===n.palette.mode,i="filled"===t.variant,a="outlined"===t.variant,l="soft"===t.variant,d=(0,o.Z)({},"default"===t.color&&(0,o.Z)((0,o.Z)({},a&&{backgroundColor:"transparent",color:n.palette.text.primary,border:"1px solid ".concat((0,s.Fq)(n.palette.grey[500],.32))}),l&&{color:r?n.palette.text.primary:n.palette.common.white,backgroundColor:(0,s.Fq)(n.palette.grey[500],.16)})),c=(0,o.Z)({},"default"!==t.color&&(0,o.Z)((0,o.Z)((0,o.Z)({},i&&{color:n.palette[t.color].contrastText,backgroundColor:n.palette[t.color].main}),a&&{backgroundColor:"transparent",color:n.palette[t.color].main,border:"1px solid ".concat(n.palette[t.color].main)}),l&&{color:n.palette[t.color][r?"dark":"light"],backgroundColor:(0,s.Fq)(n.palette[t.color].main,.16)}));return(0,o.Z)((0,o.Z)({height:24,minWidth:22,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",textTransform:"capitalize",padding:n.spacing(0,1),color:n.palette.grey[800],fontSize:n.typography.pxToRem(12),fontFamily:n.typography.fontFamily,backgroundColor:n.palette.grey[300],fontWeight:n.typography.fontWeightBold},c),d)})),u=t(46417),h=["children","color","variant","startIcon","endIcon","sx"],x=(0,i.forwardRef)((function(e,n){var t=e.children,i=e.color,d=void 0===i?"default":i,s=e.variant,x=void 0===s?"soft":s,p=e.startIcon,m=e.endIcon,f=e.sx,g=(0,r.Z)(e,h),v=(0,a.Z)(),Z={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return(0,u.jsxs)(c,(0,o.Z)((0,o.Z)({ref:n,component:"span",ownerState:{color:d,variant:x},sx:(0,o.Z)((0,o.Z)((0,o.Z)({},p&&{pl:.75}),m&&{pr:.75}),f),theme:v},g),{},{children:[p&&(0,u.jsxs)(l.Z,{sx:(0,o.Z)({mr:.75},Z),children:[" ",p," "]}),t,m&&(0,u.jsxs)(l.Z,{sx:(0,o.Z)({ml:.75},Z),children:[" ",m," "]})]}))}))},16528:function(e,n,t){t.d(n,{Z:function(){return o.Z}});var o=t(68378)},73567:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var o=t(74165),r=t(15861),i=t(29439),a=t(9506),l=t(61113),d=t(35898),s=t(90891),c=t(73428),u=t(47825),h=t(25002),x=t(24631),p=t(47313),m=t(65964),f=t(76025),g=t(37903),v=t(59519),Z=t(2135),j=t(37964),b=t(68492),w=t(9209),y=t(16335),S=t(16528),k=t(45021),C=t(32703),R=t(58908),I=t(68867),T=t(46417);function _(){var e=(0,v.K$)(),n=e.themeStretch,t=(e.presetsOption,(0,p.useState)([])),_=(0,i.Z)(t,2),z=_[0],F=_[1],D=(0,j.E)().user;(0,p.useEffect)((function(){(0,b.Pq)().then((function(e){F(e.data)}))}),[null===D||void 0===D?void 0:D.role]);var q=(0,p.useState)([]),B=(0,i.Z)(q,2),W=B[0],E=B[1],O=(0,p.useState)([]),P=(0,i.Z)(O,2),M=P[0],U=P[1],A=(0,p.useState)(""),H=(0,i.Z)(A,2),J=H[0],K=H[1],L=(0,p.useState)({}),Q=(0,i.Z)(L,2),$=(Q[0],Q[1]);(0,p.useEffect)((function(){(0,b.de)(J).then((function(e){var n,t,o;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.lessons&&U(e.data.lessons),null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.tests&&E(e.data.tests),null!==e&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.record&&(console.log(e.data.record),$(e.data.record))}))}),[J]);var G=(0,p.useState)(null),N=(0,i.Z)(G,2),V=N[0],X=N[1],Y=(0,p.useState)(null),ee=(0,i.Z)(Y,2),ne=ee[0],te=ee[1],oe=Boolean(V),re=oe?"simple-popover":void 0,ie=(0,p.useState)(!1),ae=(0,i.Z)(ie,2),le=ae[0],de=ae[1],se=(0,R.Ds)().enqueueSnackbar,ce=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de(!0),(0,b.BQ)({id:J,content:ue.current}).then((function(e){se('"'.concat(ue.current,'" has been sent to all students!'))})).catch((function(e){console.log(e),se("Something went wrong, try again later!",{variant:"error"})})).finally((function(){de(!1),ue.current=""}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=(0,p.useRef)("");return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(m.ql,{children:(0,T.jsx)("title",{children:" Student Record "})}),(0,T.jsxs)(u.Z,{maxWidth:!n&&"lg",children:[(0,T.jsx)(g.Z,{heading:" Student Record ",links:[{name:"Dashboard",href:f.vB.root},{name:"Student Record"}]}),(0,T.jsxs)(d.Z,{spacing:1,direction:{xs:"column",md:"row"},alignItems:{xs:"flex-end",md:"center"},sx:{mb:1,ml:-2},children:[(0,T.jsx)(I.iJ,{recipients:z,contacts:z,onAddRecipients:function(e){e?(0,b.de)(e.id).then((function(n){var t,o,r;null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.lessons&&(U(n.data.lessons),K(e.id)),null!==n&&void 0!==n&&null!==(o=n.data)&&void 0!==o&&o.tests&&E(n.data.tests),null!==n&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.record&&(console.log(n.data.record),$(n.data.record))})):(E([]),U([]),K(""))}}),(0,T.jsx)(k.w_,{color:ne?"primary":"default",onClick:function(e){te(e.currentTarget),X(e.currentTarget)},disabled:""===J,sx:{width:45,height:45,color:"text.secondary",ml:-4},children:(0,T.jsx)(y.Z,{icon:"formkit:datetime",sx:{width:40,height:40}})})]})]}),(0,T.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,T.jsx)(a.Z,{sx:{border:"1px solid #ddd",borderRadius:2,padding:2,boxShadow:1},children:(0,T.jsxs)(a.Z,{children:[(0,T.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",gap:2,padding:2,marginTop:-3},children:(0,T.jsx)(l.Z,{variant:"h5",sx:{mb:3,marginTop:2},children:"Lessons"})}),(0,T.jsx)(d.Z,{flexDirection:"row",gap:3,children:M.map((function(e){var n;return(0,T.jsx)(s.Z,{component:Z.rU,to:"".concat(f.vB.studentManager.record,"/").concat(J,"/lesson/").concat(null===e||void 0===e?void 0:e.id),underline:"none",children:(0,T.jsxs)(c.Z,{sx:{p:2.5,minWidth:250,boxShadow:function(e){return e.customShadows.z20},bgcolor:"background.default",border:function(e){return"solid 1px ".concat(e.palette.divider)}},children:[(0,T.jsxs)(d.Z,{flexDirection:"row",alignItems:"center",children:[(0,T.jsx)(a.Z,{component:"img",src:(0,w.vi)("folder"),sx:{width:32,height:32,flexShrink:0}}),(0,T.jsx)(S.Z,{color:"primary",sx:{mx:1},children:null===e||void 0===e?void 0:e.topic})]}),(0,T.jsxs)(l.Z,{variant:"body2",children:[(null===e||void 0===e||null===(n=e.tasks)||void 0===n?void 0:n.length)||0," tasks"]})]})})}))})]})}),(0,T.jsx)(a.Z,{sx:{border:"1px solid #ddd",borderRadius:2,padding:2,boxShadow:1},children:(0,T.jsxs)(a.Z,{sx:{mt:2},children:[(0,T.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",gap:2,padding:2,marginTop:-3},children:(0,T.jsx)(l.Z,{variant:"h5",sx:{mb:3,marginTop:2},children:"Tests"})}),(0,T.jsx)(d.Z,{flexDirection:"row",gap:3,children:W.map((function(e){var n;return(0,T.jsx)(s.Z,{component:Z.rU,to:"".concat(f.vB.studentManager.record),underline:"none",children:(0,T.jsxs)(c.Z,{sx:{p:2.5,minWidth:250,boxShadow:function(e){return e.customShadows.z20},bgcolor:"background.default",border:function(e){return"solid 1px ".concat(e.palette.divider)}},children:[(0,T.jsxs)(d.Z,{flexDirection:"row",alignItems:"center",children:[(0,T.jsx)(a.Z,{component:"img",src:(0,w.vi)("folder"),sx:{width:32,height:32,flexShrink:0}}),(0,T.jsx)(S.Z,{color:"primary",sx:{mx:1},children:null===e||void 0===e?void 0:e.name})]}),(0,T.jsxs)(l.Z,{variant:"body2",children:[(null===e||void 0===e||null===(n=e.tasks)||void 0===n?void 0:n.length)||0," ","tasks"]})]})})}))})]})})]}),(0,T.jsx)(h.ZP,{id:re,open:oe,anchorEl:V,onClose:function(){X(null),te(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,T.jsxs)(a.Z,{sx:{borderRadius:1,padding:1},children:[(0,T.jsx)(x.Z,{placeholder:"Send a notification",size:"small",maxRows:1,minRows:1,onChange:function(e){ue.current=e.target.value}}),(0,T.jsx)(C.Z,{loading:le,variant:"contained",size:"small",autoFocus:!0,onClick:ce,sx:{height:40},children:"Send"})]})})]})}}}]);